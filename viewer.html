<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<title>Running Log</title>
<link rel="stylesheet" href=
"http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css"
type="text/css">
<script src="http://code.jquery.com/jquery-1.9.1.js" type=
"text/javascript">
</script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js" type=
"text/javascript">
</script>
<style type="text/css">
body {
        font-family: "Helvetica", "Arial",  "Verdana", "sans-serif";
        font-size: 80%;
}
#dataImage { width: 100%; }
</style>

<script type="text/javascript">
$(function() {
var dateFormat = "yy-mm-dd";
var imageList = [];
$.get("imagelist.json").done(function( data ) {
	for(var i = 0; i < data.length; i++) {
		imageList[i] = $.datepicker.parseDate(dateFormat, data[i]);
	}
	imageList[imageList.length] = new Date();
}).fail(function(error) { console.log(error); });
$( "#datepicker" ).datepicker( { defaultDate: new Date(1965, 9, 17),  
        minDate: new Date(1965, 9, 17), maxDate: new Date(2010, 8, 17),
	dateFormat: dateFormat,
        onSelect: function(dateText) {
            goToDate($.datepicker.parseDate(dateFormat, dateText));
        }})

function goToDate(date) {
	var i = 0;
	while(date >= imageList[i]) { i++; }
	console.log(date + " is between " + imageList[i-1] + " and " + imageList[i]);
	var imageName = $.datepicker.formatDate(dateFormat, imageList[i-1]);
	$("#dataImage").attr("src", "images/" + imageName + ".jpg");
}
});

</script>
</head>
<body>
<p>Skip to Date: <input type="text" id="datepicker"></p>
<div><img id="dataImage" src="images/1965-10-17.jpg" name=
"dataImage" alt="table data as image"></div>
</body>
</html>

